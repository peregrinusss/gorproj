function enableScroll(){document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach(e=>e.style.paddingRight="0px"),document.body.style.paddingRight="0px",document.body.classList.remove("no-scroll")}function disableScroll(){let e=window.innerWidth>350?window.innerWidth-document.documentElement.clientWidth+"px":0;document.querySelectorAll(".fixed-block")&&document.querySelectorAll(".fixed-block").forEach(t=>t.style.paddingRight=e),document.body.style.paddingRight=e,document.body.classList.add("no-scroll")}let animSpd=400;const burger=document.querySelector("#burger");if(burger){const e=document.querySelector(".mobile-menu"),t=document.querySelector(".ham"),o=document.querySelector(".header");burger.addEventListener("click",()=>{burger.classList.toggle("active"),e.classList.toggle("active"),t.classList.toggle("active"),o.classList.toggle("burger-active"),burger.classList.contains("active")?disableScroll():enableScroll()})}const menuTriggers=document.querySelectorAll("[data-menu-open]");if(menuTriggers.length){menuTriggers.forEach(e=>{const t=e.getAttribute("data-menu-open"),o=document.querySelector(`[data-menu="${t}"]`),l=document.querySelector(".overlay"),r=document.querySelectorAll("[data-menu]");if(o){const t=()=>{r.forEach(e=>{e!==o&&e.classList.remove("active")}),o.classList.add("active"),l.classList.add("show")},c=()=>{o.classList.remove("active"),l.classList.remove("show")};e.addEventListener("mouseenter",t),o.addEventListener("mouseenter",t),o.addEventListener("mouseleave",e=>{c()})}});const l=document.querySelectorAll(".header__menu"),r=document.querySelector(".header"),c=()=>{let e=!1;l.forEach(t=>{t.classList.contains("active")&&(e=!0)}),e?(r.style.borderBottomRightRadius="0",r.style.borderBottomLeftRadius="0"):(r.style.borderBottomRightRadius="52px",r.style.borderBottomLeftRadius="52px")};l.forEach(e=>{new MutationObserver(()=>{c()}).observe(e,{attributes:!0,attributeFilter:["class"]})})}const menuAccordion=document.querySelector(".accordion-container");menuAccordion&&new Accordion(menuAccordion,{onOpen:function(e){e.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}});const buttons=document.querySelectorAll(".tooltip-btn");if(buttons.length){function closeAllTooltips(){document.querySelectorAll(".tooltip").forEach(e=>{e.classList.remove("active")})}buttons.forEach(e=>{const t=e.getAttribute("data-tooltip-target"),o=document.querySelector(`[data-tooltip="${t}"]`);o&&e.addEventListener("click",t=>{t.stopPropagation(),closeAllTooltips(),o.classList.toggle("active"),e.classList.toggle("active")}),document.addEventListener("click",t=>{closeAllTooltips(),e.classList.remove("active")})})}const modalOpenBtn=document.querySelectorAll(".mod-open-btn"),modalCloseBtn=document.querySelectorAll(".mod-close-btn"),modal=document.querySelectorAll(".modal"),successModal=document.querySelector("#success-modal"),errorModal=document.querySelector("#error-modal");function openSuccessModal(e,t,o,l=!1){if(successModal.querySelector("h3").textContent=e||"Заявка успешно отправлена",successModal.querySelector("p").textContent=t||"",successModal.querySelector(".main-btn").textContent=o||"Закрыть",l){const e=successModal.querySelector(".icon-success");e.classList.remove("icon-success"),e.classList.add("icon-review")}let r=document.querySelector(".modal.open");r||disableScroll(),r&&r.classList.remove("open"),successModal.classList.add("open")}function openErrorModal(e,t,o){errorModal.querySelector("h3").textContent=e||"Что-то пошло не так",errorModal.querySelector("p").textContent=t||"",errorModal.querySelector(".main-btn").textContent=o||"Закрыть";let l=document.querySelector(".modal.open");l||disableScroll(),l&&l.classList.remove("open"),errorModal.classList.add("open")}function openModal(e){let t=document.querySelector(".modal.open");t||disableScroll(),t&&t.classList.remove("open"),e.classList.add("open")}function closeModal(e){e.classList.remove("open");document.querySelector(".mobile-menu").classList.contains("active")||setTimeout(()=>{enableScroll()},animSpd)}modal.forEach(e=>{e.addEventListener("click",t=>{e.querySelector(".modal__content").contains(t.target)&&!e.querySelector(".btn-close").contains(t.target)||closeModal(e)})}),modalOpenBtn.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let o=e.getAttribute("data-modal");openModal(document.getElementById(o))})}),modalCloseBtn.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let o=e.getAttribute("data-modal");closeModal(document.getElementById(o))})});const inp=document.querySelectorAll("input[type=tel]");inp&&inp.forEach(e=>{Inputmask({mask:"+7 999 999-99-99"}).mask(e)});const introSwiper=new Swiper(".intro-swiper",{loop:!0,speed:700,effect:"fade",autoplay:{delay:8e3,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0,renderBullet:(e,t)=>`\n      <span class="${t} bullet">\n        <span class="dot"></span>\n        <svg class="ring" viewBox="0 0 24 24" aria-hidden="true">\n          <circle class="progress" cx="12" cy="12" r="10"></circle>\n        </svg>\n      </span>\n    `},observer:!0,observeParents:!0,on:{init(){handleVideos(this),resetBulletProgress(this),startBulletRaf(this)},slideChangeTransitionStart(){handleVideos(this),resetBulletProgress(this),startBulletRaf(this)},autoplayTimeLeft(e,t,o){const l=e.pagination?.el?.querySelector(".swiper-pagination-bullet-active");l&&l.style.setProperty("--p",Math.max(0,Math.min(1,o)))}}});function resetBulletProgress(e){e.pagination?.bullets?.forEach(e=>e.style.setProperty("--p",0)),e._bulletRaf&&cancelAnimationFrame(e._bulletRaf)}function startBulletRaf(e){e._bulletRaf&&cancelAnimationFrame(e._bulletRaf);const t=("object"==typeof e.params.autoplay?e.params.autoplay.delay:e.params.autoplay)||5e3,o=performance.now(),l=r=>{const c=Math.max(0,Math.min(1,(r-o)/t)),n=e.pagination?.el?.querySelector(".swiper-pagination-bullet-active");n&&n.style.setProperty("--p",c),e._bulletRaf=requestAnimationFrame(l)};e._bulletRaf=requestAnimationFrame(l)}function handleVideos(e){document.querySelectorAll(".intro__video").forEach(e=>{try{e.pause()}catch(e){}});const t=e.slides[e.activeIndex],o=t&&t.querySelector(".intro__video");if(!o)return;const l=o.play();l&&"function"==typeof l.then&&l.catch(()=>{})}function tabSwitch(e,t){e.forEach((o,l)=>{o.addEventListener("click",()=>{e.forEach(e=>{e.classList.remove("active")}),t.forEach(e=>{e.classList.remove("active")}),o.classList.add("active"),t[l].classList.add("active"),o.style.opacity="0",t[l].style.opacity="0",setTimeout(()=>{o.style.opacity="1",t[l].style.opacity="1"},0)})})}const switchBlock=document.querySelectorAll(".switch-block");switchBlock&&switchBlock.forEach(e=>{tabSwitch(e.querySelectorAll("[data-nav]"),e.querySelectorAll("[data-block]"))});const tabsScroll=document.querySelectorAll(".tabs-scroll");function viewScroll(){tabsScroll.forEach(e=>{e.querySelector(".tabs").scrollWidth-e.querySelector(".tabs").clientWidth-e.querySelector(".tabs").scrollLeft>5?e.classList.add("show-btn"):e.classList.remove("show-btn"),e.querySelector(".tabs").addEventListener("scroll",()=>{e.querySelector(".tabs").scrollWidth-e.querySelector(".tabs").clientWidth-e.querySelector(".tabs").scrollLeft>5?e.classList.add("show-btn"):e.classList.remove("show-btn")})})}tabsScroll&&(viewScroll(),window.addEventListener("resize",viewScroll));const searchBlock=document.querySelector("#search-block");if(searchBlock){const n=searchBlock.querySelector("#search-input"),s=searchBlock.querySelector("#search-empty");n.addEventListener("input",()=>{n.value.trim()?s.classList.add("visible"):s.classList.remove("visible")}),s.addEventListener("click",()=>{n.value="",s.classList.remove("visible"),n.focus()})}async function initMap(){await ymaps3.ready;const{YMap:e,YMapDefaultSchemeLayer:t,YMapMarker:o,YMapDefaultFeaturesLayer:l}=ymaps3,r=new e(document.getElementById("map"),{location:{center:[37.69241140342709,55.792086375807806],zoom:16}});r.addChild(new t),r.addChild(new l);const c=document.createElement("div");c.className="map-marker";const n=document.createElement("img");n.src="img/marker.svg",n.classList.add("map-icon"),c.appendChild(n);const s=new o({coordinates:[37.6939241693115,55.79234629163217],draggable:!1,mapFollowsOnDrag:!0},c);r.addChild(s)}const scrollBlock=document.getElementById("more-scroll");if(scrollBlock){const a=document.getElementById("more-scroll-body"),i=scrollBlock.querySelector(".home-text__bottom"),d=i.querySelector(".nav-btn--next");a&&d&&d.addEventListener("click",function(){a.style.transition="height 0.5s ease-in-out",a.style.height=a.scrollHeight+"px",d.classList.add("rotate"),i.style.display="none",setTimeout(()=>{a.style.height="auto"},500)})}function initTabAnchors(){const e=document.querySelector(".modal-left__result");if(e){e.querySelectorAll("[data-nav]").forEach(t=>{t.addEventListener("click",o=>{console.log(t);const l=o.target.getAttribute("data-nav"),r=e.querySelector(l);r&&(o.preventDefault(),r.scrollIntoView({behavior:"smooth",block:"start"}))})})}}const animTexts=document.querySelectorAll(".animated-text");animTexts.length&&animTexts.forEach(e=>{const t=e.innerHTML.split("<br>");e.innerHTML="",t.forEach((t,o)=>{const l=document.createElement("div");l.classList.add("line-wrapper");const r=document.createElement("span");r.classList.add("line"),r.style.animationDelay=.3*o+"s",r.innerHTML=t.trim(),l.appendChild(r),e.appendChild(l)})}),document.addEventListener("DOMContentLoaded",()=>{gsap.registerPlugin(ScrollTrigger);const e=new Lenis({duration:1.05,smoothWheel:!0,smoothTouch:!1});e.on("scroll",ScrollTrigger.update),requestAnimationFrame(function t(o){e.raf(o),requestAnimationFrame(t)}),document.querySelectorAll(".scroll-scene").forEach(e=>{const t=e.querySelector(".title"),o=e.querySelector(".subtitle");if(!t||!o)return;gsap.set(t,{x:0,scale:1,transformOrigin:"50% 50%"}),gsap.set(o,{x:()=>.5*window.innerWidth,opacity:0});const l=gsap.timeline({scrollTrigger:{trigger:e,start:"top top",end:"+=150%",scrub:!0,pin:!0,anticipatePin:1,invalidateOnRefresh:!0}});l.to(o,{x:0,opacity:1,duration:.45,ease:"power2.out"},0).to(t,{x:()=>{const e=window.innerWidth,o=.5*t.getBoundingClientRect().width;return(parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--scene-inset"))||16)+o/2-e/2},scale:.5,duration:.2,ease:"power2.inOut"},0),ScrollTrigger.matchMedia({"(max-width: 480px)":()=>{l.vars.end="+=130%",ScrollTrigger.refresh()}})}),document.fonts?.ready&&document.fonts.ready.then(()=>ScrollTrigger.refresh()),window.addEventListener("resize",()=>ScrollTrigger.refresh(),{passive:!0});const t=document.querySelector(".header"),o=document.querySelector(".intro");t&&o&&ScrollTrigger.create({trigger:o,start:"bottom top",onEnter:()=>t.classList.add("white"),onLeaveBack:()=>t.classList.remove("white")})});